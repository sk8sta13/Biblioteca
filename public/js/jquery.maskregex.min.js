/**
 *  Project: jQuery plugin Mask Regex
 *  Author: Marcelo S. Campos <sk8sta13@gmail.com>
 *	https://github.com/sk8sta13/jquery.maskregex
 *  License: MIT License (https://raw.github.com/plentz/jquery-maskmoney/master/LICENSE)
 *
 *	JQuery plugin to create masks in HTML fields.
 *	Main aim is to work in any browser on any mobile device including.
 */

;(function(e,t,n,r){var s="mask",o="Plugin_"+s,u={centsDigits:2,centsSeparator:",",thousandSeparator:".",currencySymbol:"R$"};var a=function(t,n){this.element=t;this.settings=typeof n=="string"?n:e.extend({},u,n);this.money=typeof n=="string"?false:true;this.init(n)};a.prototype={init:function(e){var t=this;var n="";t.element.bind("keyup",function(e){n=t.element.val();n=t.clearStr(n);if(t.money){var r=(n.length-t.settings.centsDigits)%3==0?1:0;var i=Math.floor((n.length-(t.settings.centsDigits+1))/3-r);for(var s=i;s>=0;s--){n=t.setPosition(n,(s+1)*3+t.settings.centsDigits,t.settings.thousandSeparator,false)}n=t.setPosition(n,t.settings.centsDigits,t.settings.centsSeparator,false);n=t.settings.currencySymbol+" "+n}else{t.maxLength(t.settings.length);var o=t.getSymbols(t.settings);var u=t.getPositions(t.settings);for(var s=0;s<=o.length-1;s++){n=t.setPosition(n,u[s],o[s],true)}}t.element.val(n)});return this},clearStr:function(e){var t=this.settings;if(!this.money&&t.indexOf("A")>=0){t=t.replace(/[^0-9a-zA-Z]/g,"");e=e.toUpperCase();var n="";for(var r=0;r<=e.length-1;r++){var i=e[r];if(t[r]=="A"){i=i.replace(/[0-9]/g,"")}else if(t[r]=="9"){i=i.replace(/\D/g,"")}n+=i}return n}else{return e.replace(/\D/g,"")}},setPosition:function(e,t,n,r){if(t>=0&&n!=""){var i=r?new RegExp("(.{"+t+"})(.)"):new RegExp("(\\d)(\\d{"+t+"})$");return e.replace(i,"$1"+n+"$2")}},maxLength:function(e){this.element.attr("maxLength",e)},getSymbols:function(e){return e.match(/[^0-9a-zA-Z]/g)},getPositions:function(e){var t=this.getSymbols(e);var n=Array();var r=0;for(i=0;i<=e.length-1;i++){if(e.indexOf(t[i],r)!=-1){n[i]=e.indexOf(t[i],r);r=n[i]+1}}return n}};e.fn[s]=function(e){var t=this.data(o);if(t instanceof a){if(typeof e!=="undefined"){t.init(e)}}else{t=new a(this,e);this.data(o,t)}return t}})(jQuery,window,document);